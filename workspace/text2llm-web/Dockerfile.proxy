FROM node:22-bookworm-slim

WORKDIR /app

RUN npm init -y && npm install --omit=dev express@^5.1.0

COPY proxy-server.mjs ./proxy-server.mjs
COPY supabase ./supabase

ENV NODE_ENV=production
ENV PORT=8790

EXPOSE 8790

CMD ["node", "proxy-server.mjs"]
